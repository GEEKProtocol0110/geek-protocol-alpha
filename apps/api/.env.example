# ==================================================================
# GEEK PROTOCOL API â€“ ENVIRONMENT TEMPLATE
# ==================================================================
# Copy this file to apps/api/.env and customize for your environment.
# Never commit secrets. Use a password manager or secret store instead.

# ------------------------------------------------------------------
# DATABASE
# ------------------------------------------------------------------
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/geek_protocol"

# Optional: dedicated URL for automated tests
# TEST_DATABASE_URL="postgresql://postgres:postgres@localhost:5432/geek_protocol_test"

# ------------------------------------------------------------------
# REDIS (queues, caching)
# ------------------------------------------------------------------
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""      # Leave blank for local development

# ------------------------------------------------------------------
# API SERVER
# ------------------------------------------------------------------
PORT=3002
HOST="0.0.0.0"
NODE_ENV="development"  # development | production | test
FRONTEND_URL="http://localhost:3000"
CORS_ORIGIN="http://localhost:3000"

# ------------------------------------------------------------------
# SECURITY / AUTHENTICATION
# ------------------------------------------------------------------
# Generate secrets with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="replace-with-strong-secret"
JWT_EXPIRES_IN="7d"
HMAC_SECRET="replace-with-strong-hmac-secret"
ATTEMPT_TOKEN_SECRET="replace-with-strong-attempt-secret"

# ------------------------------------------------------------------
# REWARD ECONOMICS
# ------------------------------------------------------------------
ENABLE_REWARDS="false"          # true to enable payouts
MIN_SCORE_FOR_REWARD="75"       # percent
REWARD_SATS_PER_CORRECT="750"   # sats per correct answer
REWARD_CONFIRM_DELAY_MS="5000"  # ms for SENT -> CONFIRMED transition
REWARD_REQUIRE_WALLET="true"
GEEK_HOLD_REQUIREMENT="1000"    # sats required to earn

# ------------------------------------------------------------------
# KASPA / WEB3
# ------------------------------------------------------------------
KASPA_NETWORK="testnet"
KASPA_RPC_URL="https://testnet.kaspa.org/api"
KASPLEX_API_URL="https://kasplex-testnet.herokuapp.com"
# KASPA_WALLET_ADDRESS="kaspa:your-address-here"
# KASPA_PRIVATE_KEY="never-commit-real-private-keys"

# ------------------------------------------------------------------
# LOGGING & OBSERVABILITY
# ------------------------------------------------------------------
LOG_LEVEL="info"        # fatal | error | warn | info | debug | trace
LOG_PRETTY="true"       # pretty print logs locally
# SENTRY_DSN="your-sentry-dsn"

# ------------------------------------------------------------------
# RATE LIMITING
# ------------------------------------------------------------------
RATE_LIMIT_MAX="100"
RATE_LIMIT_WINDOW="60000"   # ms (60 seconds)

# ------------------------------------------------------------------
# OPTIONAL THIRD-PARTY INTEGRATIONS
# ------------------------------------------------------------------
# ANALYTICS_ID="optional-analytics-id"
